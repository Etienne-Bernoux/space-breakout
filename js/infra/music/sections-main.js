// --- Section Configs — MAIN (Mi mineur) ---
// E2=40 G2=43 A2=45 B2=47 D3=50
// E4=64 G4=67 A4=69 B4=71 D5=74 E5=76

const MAIN_INTRO = {
  drums: [],
  bass: [],
  pad: [
    { fn: 'pad', t: 0, notes: [52, 55, 59], dur: 4 },
    { fn: 'pad', t: 4, notes: [48, 52, 55], dur: 4 },
    { fn: 'pad', t: 8, notes: [55, 59, 62], dur: 4 },
    { fn: 'pad', t: 12, notes: [50, 54, 57], dur: 4 },
  ],
  lead: [64, 71, 76, 71, 69, 71, 67, 64, 60, 67, 72, 67, 64, 67, 60, 64,
         67, 74, 79, 74, 71, 74, 67, 71, 62, 69, 74, 69, 66, 69, 62, 66]
    .map((n, i) => ({ fn: 'arp', t: i * 0.5, note: n, dur: 0.6 })),
  high: [],
};

const MAIN_VERSE = {
  drums: [
    ...[0, 4, 8, 12].map(t => ({ fn: 'kick', t })),
    ...[2, 6, 10, 14].map(t => ({ fn: 'hihat', t, vol: 0.06 })),
    { fn: 'snare', t: 4 },
  ],
  bass: [
    [40, 0, 3], [40, 3, 1], [43, 4, 3], [43, 7, 1],
    [45, 8, 3], [45, 11, 1], [47, 12, 2], [45, 14, 2],
  ].map(([note, t, dur]) => ({ fn: 'bass', t, note, dur })),
  pad: [
    { fn: 'pad', t: 0, notes: [52, 55, 59], dur: 4 },
    { fn: 'pad', t: 4, notes: [55, 59, 62], dur: 4 },
    { fn: 'pad', t: 8, notes: [57, 60, 64], dur: 4 },
    { fn: 'pad', t: 12, notes: [47, 55, 59], dur: 4 },
  ],
  lead: [
    [64, 0, 1.5], [67, 2, 1], [69, 3, 1],
    [67, 4, 1.5], [71, 6, 2],
    [69, 8, 1], [71, 9, 0.5], [74, 9.5, 1.5], [71, 11, 1],
    [69, 12, 1.5], [67, 14, 2],
  ].map(([note, t, dur]) => ({ fn: 'lead', t, note, dur, vol: 0.1 })),
  high: [],
};

const MAIN_CHORUS = {
  drums: [
    ...Array.from({ length: 16 }, (_, i) => ({ fn: 'kick', t: i })),
    ...Array.from({ length: 16 }, (_, i) => ({ fn: 'hihat', t: i + 0.5, vol: 0.07 })),
    ...[2, 6, 10, 14].map(t => ({ fn: 'snare', t })),
  ],
  bass: [
    [40, 0, 1], [40, 1, 1], [40, 2, 0.5], [43, 2.5, 1.5],
    [43, 4, 1], [43, 5, 1], [45, 6, 1], [47, 7, 1],
    [45, 8, 1], [45, 9, 1], [45, 10, 0.5], [43, 10.5, 1.5],
    [47, 12, 1], [47, 13, 1], [45, 14, 1], [43, 15, 1],
  ].map(([note, t, dur]) => ({ fn: 'bass', t, note, dur })),
  pad: [
    { fn: 'pad', t: 0, notes: [52, 55, 59], dur: 4 },
    { fn: 'pad', t: 4, notes: [55, 59, 62], dur: 4 },
    { fn: 'pad', t: 8, notes: [57, 60, 64], dur: 4 },
    { fn: 'pad', t: 12, notes: [47, 54, 59], dur: 4 },
  ],
  lead: [
    [71, 0, 1], [74, 1, 1], [76, 2, 2],
    [74, 4, 0.5], [76, 4.5, 0.5], [79, 5, 1.5], [76, 6.5, 1.5],
    [74, 8, 1], [71, 9, 1], [74, 10, 1], [76, 11, 1],
    [74, 12, 0.5], [71, 12.5, 0.5], [69, 13, 1], [67, 14, 1], [64, 15, 1],
  ].map(([note, t, dur]) => ({ fn: 'lead', t, note, dur, vol: 0.15 })),
  high: [],
};

const MAIN_BRIDGE = {
  drums: [
    ...Array.from({ length: 8 }, (_, i) => ({ fn: 'kick', t: i * 2 })),
    ...[12, 13, 14, 15].map(t => ({ fn: 'hihat', t: t + 0.5, vol: 0.05 })),
  ],
  bass: [
    { fn: 'bass', t: 0, note: 40, dur: 4 },
    { fn: 'bass', t: 4, note: 45, dur: 4 },
    { fn: 'bass', t: 8, note: 43, dur: 4 },
    { fn: 'bass', t: 12, note: 47, dur: 4 },
  ],
  pad: [
    { fn: 'pad', t: 0, notes: [52, 55, 59], dur: 8 },
    { fn: 'pad', t: 8, notes: [55, 59, 62], dur: 8 },
  ],
  lead: [64, 67, 71, 67, 69, 71, 74, 71, 67, 71, 74, 71, 69, 74, 76, 74,
         71, 74, 76, 74, 76, 79, 76, 79, 74, 76, 79, 76, 79, 81, 79, 83]
    .map((n, i) => ({ fn: 'arp', t: i * 0.5, note: n, dur: 0.55 })),
  high: [],
};

const MAIN_BREAKDOWN = {
  drums: [
    { fn: 'kick', t: 0 }, { fn: 'kick', t: 8 },
    ...Array.from({ length: 8 }, (_, i) => ({ fn: 'hihat', t: i * 2, vol: 0.04 })),
    ...Array.from({ length: 16 }, (_, i) => ({ fn: 'hihat', t: i + 0.5, vol: 0.03 })),
    ...[12, 13, 14, 15].map(t => ({ fn: 'snare', t })),
    { fn: 'snare', t: 14.5 }, { fn: 'snare', t: 15.5 },
  ],
  bass: [
    { fn: 'bass', t: 0, note: 40, dur: 8 },
    { fn: 'bass', t: 8, note: 43, dur: 4 },
    { fn: 'bass', t: 12, note: 45, dur: 4 },
  ],
  pad: [
    { fn: 'pad', t: 0, notes: [52, 55, 58], dur: 8 },
    { fn: 'pad', t: 8, notes: [52, 55, 59], dur: 8 },
  ],
  lead: [],
  high: [],
};

const MAIN_CLIMAX = {
  drums: [
    ...Array.from({ length: 16 }, (_, i) => ({ fn: 'kick', t: i })),
    ...Array.from({ length: 16 }, (_, i) => [
      { fn: 'hihat', t: i, vol: 0.08 },
      { fn: 'hihat', t: i + 0.25, vol: 0.05 },
      { fn: 'hihat', t: i + 0.5, vol: 0.07 },
      { fn: 'hihat', t: i + 0.75, vol: 0.04 },
    ]).flat(),
    ...[1, 3, 5, 7, 9, 11, 13, 15].map(t => ({ fn: 'snare', t })),
  ],
  bass: [
    [40, 0, 0.5], [40, 0.5, 0.5], [43, 1, 0.5], [45, 1.5, 0.5],
    [47, 2, 1], [45, 3, 0.5], [43, 3.5, 0.5],
    [40, 4, 0.5], [40, 4.5, 0.5], [43, 5, 0.5], [47, 5.5, 0.5],
    [45, 6, 1], [43, 7, 0.5], [40, 7.5, 0.5],
    [40, 8, 0.5], [43, 8.5, 0.5], [45, 9, 0.5], [47, 9.5, 0.5],
    [48, 10, 1], [47, 11, 0.5], [45, 11.5, 0.5],
    [43, 12, 1], [45, 13, 1], [47, 14, 1], [40, 15, 1],
  ].map(([note, t, dur]) => ({ fn: 'bass', t, note, dur })),
  pad: [
    { fn: 'pad', t: 0, notes: [52, 55, 59, 64], dur: 4 },
    { fn: 'pad', t: 4, notes: [55, 59, 62, 67], dur: 4 },
    { fn: 'pad', t: 8, notes: [57, 60, 64, 69], dur: 4 },
    { fn: 'pad', t: 12, notes: [52, 55, 59, 64], dur: 4 },
  ],
  lead: [
    [76, 0, 0.5], [79, 0.5, 0.5], [81, 1, 1], [83, 2, 1], [81, 3, 1],
    [79, 4, 0.5], [81, 4.5, 0.5], [83, 5, 1], [86, 6, 2],
    [83, 8, 0.5], [81, 8.5, 0.5], [79, 9, 1], [81, 10, 1], [83, 11, 1],
    [81, 12, 1], [79, 13, 1], [76, 14, 1], [74, 15, 1],
  ].map(([note, t, dur]) => ({ fn: 'lead', t, note, dur, vol: 0.18 })),
  high: [
    // leadOctave doublant la mélodie
    ...[
      [76, 0, 0.5], [79, 0.5, 0.5], [81, 1, 1], [83, 2, 1], [81, 3, 1],
      [79, 4, 0.5], [81, 4.5, 0.5], [83, 5, 1], [86, 6, 2],
      [83, 8, 0.5], [81, 8.5, 0.5], [79, 9, 1], [81, 10, 1], [83, 11, 1],
      [81, 12, 1], [79, 13, 1], [76, 14, 1], [74, 15, 1],
    ].map(([note, t, dur]) => ({ fn: 'leadOctave', t, note, dur, vol: 0.06 })),
    // arpFast 16th notes
    ...[76, 79, 83, 79, 81, 76, 79, 83, 79, 83, 86, 83, 81, 79, 83, 81,
        83, 86, 88, 86, 83, 81, 79, 83, 81, 79, 76, 79, 81, 83, 79, 76]
      .map((n, i) => ({ fn: 'arpFast', t: i * 0.5, note: n, dur: 0.35 })),
  ],
};

const MAIN_OUTRO = {
  drums: [
    ...Array.from({ length: 16 }, (_, i) => ({ fn: 'kick', t: i })),
    ...Array.from({ length: 16 }, (_, i) => ({ fn: 'hihat', t: i + 0.5, vol: 0.07 })),
    ...[2, 6, 10, 14].map(t => ({ fn: 'snare', t })),
    ...[4, 8, 12].map(t => ({ fn: 'hihat', t, vol: 0.04 })),
  ],
  bass: [
    [40, 0, 1], [40, 1, 0.5], [43, 1.5, 0.5], [40, 2, 1], [43, 3, 1],
    [45, 4, 1], [45, 5, 1], [43, 6, 1], [47, 7, 1],
    [40, 8, 1], [40, 9, 0.5], [43, 9.5, 0.5], [45, 10, 1], [47, 11, 1],
    [45, 12, 2], [43, 14, 1], [40, 15, 1],
  ].map(([note, t, dur]) => ({ fn: 'bass', t, note, dur })),
  pad: [
    { fn: 'pad', t: 0, notes: [52, 55, 59], dur: 4 },
    { fn: 'pad', t: 4, notes: [57, 60, 64], dur: 4 },
    { fn: 'pad', t: 8, notes: [55, 59, 62], dur: 4 },
    { fn: 'pad', t: 12, notes: [52, 55, 59], dur: 4 },
  ],
  lead: [
    [76, 0, 1], [79, 1, 1], [81, 2, 2],
    [79, 4, 0.5], [76, 4.5, 0.5], [74, 5, 1.5], [76, 6.5, 1.5],
    [74, 8, 0.5], [76, 8.5, 0.5], [79, 9, 1], [76, 10, 1], [74, 11, 1],
    [71, 12, 1.5], [69, 13.5, 1], [67, 14.5, 0.5], [64, 15, 1],
  ].map(([note, t, dur]) => ({ fn: 'lead', t, note, dur, vol: 0.15 })),
  high: [],
};

export { MAIN_INTRO, MAIN_VERSE, MAIN_CHORUS, MAIN_BRIDGE, MAIN_BREAKDOWN, MAIN_CLIMAX, MAIN_OUTRO };
